<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ãƒã‚¤ã‚¿ãƒ«è©•ä¾¡ãƒã‚§ãƒƒã‚«ãƒ¼</title>
  <link rel="stylesheet" href="style.css">
  <style>
    body {background:#f4f8fc;font-family:'Segoe UI',sans-serif}
    .vital-container{max-width:900px;margin:0 auto;padding:30px}
    .card-box{background:#fff;border-left:8px solid #007acc;border-radius:14px;padding:24px;margin-bottom:24px;box-shadow:0 4px 15px rgba(0,0,0,.08);transition:transform .3s ease,box-shadow .3s ease}
    .card-box:hover{transform:scale(1.01);box-shadow:0 6px 18px rgba(0,0,0,.12)}
    .card-box h3{margin-top:0;color:#007acc;font-size:1.3em;border-bottom:1px solid #e0e0e0;padding-bottom:6px}
    .result{font-weight:bold;font-size:1.15em;color:#333;padding-top:5px}
    .form-grid{display:grid;grid-template-columns:1fr 1fr;gap:1.2em}
    .form-grid label{display:block;font-weight:bold;margin-bottom:4px}
    .form-grid input,.form-grid select{width:100%;padding:.6em;border:1px solid #ccc;border-radius:6px;background:#fdfdfd;box-shadow:inset 0 1px 2px rgba(0,0,0,.05)}
    .btn-evaluate{position:relative;display:inline-block;padding:14px 40px;font-size:1.1em;font-weight:bold;color:#fff;background:linear-gradient(135deg,#34c759 0%,#28a745 100%);border:none;border-radius:50px;cursor:pointer;overflow:hidden;box-shadow:0 8px 20px rgba(40,167,69,.35);transition:transform .2s ease,box-shadow .2s ease}
    .btn-evaluate::after{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:rgba(255,255,255,.25);transform:skewX(-20deg);transition:left .45s ease}
    .btn-evaluate:hover{transform:scale(1.05);box-shadow:0 12px 30px rgba(40,167,69,.45)}
    .btn-evaluate:hover::after{left:100%}
    .btn-wrapper{display:flex;justify-content:center;margin-top:32px}
  </style>
</head>
<body>
<section class="vital-container">
  <div class="card-box">
    <h3>ğŸ“˜ è©•ä¾¡çµæœã®è§£èª¬</h3>
    <ul>
      <li><strong>ã‚·ãƒ§ãƒƒã‚¯ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ï¼ˆSIï¼‰</strong>ï¼è„ˆæ‹ / åç¸®æœŸè¡€åœ§</li>
      <li><strong>è„ˆåœ§ï¼ˆPPï¼‰</strong>ï¼åç¸®æœŸè¡€åœ§ âˆ’ æ‹¡å¼µæœŸè¡€åœ§</li>
      <li><strong>è„ˆåœ§æ¯”ï¼ˆPPRï¼‰</strong>ï¼PP / åç¸®æœŸè¡€åœ§</li>
      <li><strong>GCS</strong>ï¼E+V+M</li>
      <li><strong>NEWS</strong>ï¼æ—©æœŸè­¦æˆ’ã‚¹ã‚³ã‚¢</li>
      <li><strong>qSOFA</strong>ï¼æ•—è¡€ç—‡ã‚¹ã‚¯ãƒªãƒ¼ãƒ‹ãƒ³ã‚°</li>
    </ul>
  </div>

  <h1>ãƒã‚¤ã‚¿ãƒ«è©•ä¾¡ãƒã‚§ãƒƒã‚«ãƒ¼</h1>
  <form id="vitalForm">
    <div class="form-grid">
      <div><label>å°¿é‡ï¼ˆml/hï¼‰</label><input type="number" id="urine" min="0"></div>
      <div><label>ä½“æ¸©ï¼ˆâ„ƒï¼‰</label><input type="number" step="0.1" id="temp"></div>
      <div><label>è„ˆæ‹æ•°ï¼ˆå›/åˆ†ï¼‰</label><input type="number" id="pulse"></div>
      <div><label>å‘¼å¸æ•°ï¼ˆå›/åˆ†ï¼‰</label><input type="number" id="rr"></div>
      <div><label>æ‹¡å¼µæœŸè¡€åœ§ï¼ˆmmHgï¼‰</label><input type="number" id="dap"></div>
      <div><label>åç¸®æœŸè¡€åœ§ï¼ˆmmHgï¼‰</label><input type="number" id="bp"></div>
      <div><label>SpOâ‚‚ï¼ˆ%ï¼‰</label><input type="number" id="spo2"></div>
      <div><label>é…¸ç´ æŠ•ä¸ã‚ã‚Šï¼Ÿ</label><select id="oxygen"><option value="no">ãªã—</option><option value="yes">ã‚ã‚Š</option></select></div>
      <div><label>GCS - E</label><input type="number" id="gcsE" min="1" max="4"></div>
      <div><label>GCS - V</label><input type="number" id="gcsV" min="1" max="5"></div>
      <div><label>GCS - M</label><input type="number" id="gcsM" min="1" max="6"></div>
      <div><label>AVPU</label><select id="avpu"><option value="A">A</option><option value="V">V</option><option value="P">P</option><option value="U">U</option></select></div>
    </div>
    <div class="btn-wrapper"><button type="submit" class="btn-evaluate">è©•ä¾¡ã™ã‚‹</button></div>
  </form>

  <div id="resultArea"></div>

<script>
const form=document.getElementById('vitalForm');
const resultArea=document.getElementById('resultArea');
const val=id=>{const v=document.getElementById(id).value.trim();return v===''?NaN:Number(v)};
const card=(t,b)=>`<div class="card-box"><h3>${t}</h3><p class="result">${b}</p></div>`;

form.addEventListener('submit',e=>{
  e.preventDefault();
  resultArea.innerHTML='';
  const sbp=val('bp'),dbp=val('dap'),pulse=val('pulse'),rr=val('rr'),spo2=val('spo2'),temp=val('temp'),urine=val('urine');
  const oxygen=document.getElementById('oxygen').value;
  const gE=val('gcsE'),gV=val('gcsV'),gM=val('gcsM');
  const avpu=document.getElementById('avpu').value;
  let html='';

  // SI
  if(!isNaN(pulse)&&!isNaN(sbp)&&sbp!==0){
    const si=(pulse/sbp).toFixed(2);
    const m=si<0.5?'æ­£å¸¸':si<1?'æ³¨æ„':'ã‚·ãƒ§ãƒƒã‚¯ç–‘ã„';
    html+=card('ğŸŸ¡ SI',`SI=${si} â†’ ${m}`);
  }else{
    const miss=[];if(isNaN(pulse))miss.push('è„ˆæ‹');if(isNaN(sbp))miss.push('åç¸®æœŸè¡€åœ§');
    html+=card('ğŸŸ¡ SI',`è©•ä¾¡ã§ãã¾ã›ã‚“ï¼ˆ${miss.join('ãƒ»')}ï¼‰`);
  }

  // PP & PPR
  if(!isNaN(sbp)&&!isNaN(dbp)){
    const pp=sbp-dbp;const ppr=(pp/sbp).toFixed(2);
    const ppMsg=pp<30?'ç‹­å°':pp<=60?'æ­£å¸¸':'åºƒå¹…';
    const pprMsg=ppr<0.25?'ç‹­å°':ppr<=0.5?'æ­£å¸¸':'åºƒå¹…';
    html+=card('ğŸ“ˆ è„ˆåœ§',`${pp} mmHg â†’ ${ppMsg}`);
    html+=card('ğŸ“‰ è„ˆåœ§æ¯”',`PPR=${ppr} â†’ ${pprMsg}`);
  }else{
    const miss=[];if(isNaN(sbp))miss.push('åç¸®æœŸè¡€åœ§');if(isNaN(dbp))miss.push('æ‹¡å¼µæœŸè¡€åœ§');
    html+=card('ğŸ“ˆ è„ˆåœ§',`è©•ä¾¡ã§ãã¾ã›ã‚“ï¼ˆ${miss.join('ãƒ»')}ï¼‰`);
    html+=card('ğŸ“‰ è„ˆåœ§æ¯”',`è©•ä¾¡ã§ãã¾ã›ã‚“ï¼ˆ${miss.join('ãƒ»')}ï¼‰`);
  }

  // GCS
  if(!isNaN(gE)&&!isNaN(gV)&&!isNaN(gM)){
    const gcs=gE+gV+gM;
    const gMsg=gcs>=15?'æ¸…æ˜':gcs>=13?'è»½åº¦':gcs>=9?'ä¸­ç­‰åº¦':'é‡åº¦';
    html+=card('ğŸ§  GCS',`${gcs}ç‚¹(E${gE}+V${gV}+M${gM}) â†’ ${gMsg}`);
  }else{
    const miss=[];if(isNaN(gE))miss.push('GCS-E');if(isNaN(gV))miss.push('GCS-V');if(isNaN(gM))miss.push('GCS-M');
    html+=card('ğŸ§  GCS',`è©•ä¾¡ã§ãã¾ã›ã‚“ï¼ˆ${miss.join('ãƒ»')}ï¼‰`);
  }

  // NEWS (è¨ˆç®—å¯èƒ½é …ç›®ã®ã¿ã§åŠ ç®—)
  let news=0; let usedNews=false;
  if(!isNaN(rr)){usedNews=true;if(rr<=8||rr>=25)news+=3;else if(rr>=21)news+=2;else if(rr>=9&&rr<=11)news+=1;}
  if(!isNaN(spo2)){usedNews=true;if(spo2<=91)news+=3;else if(spo2<=93)news+=2;else if(spo2<=95)news+=1;}
  if(oxygen==='yes'){usedNews=true;news+=2;}
  if(!isNaN(temp)){usedNews=true;if(temp<35||temp>=39.1)news+=3;else if(temp>=38.1)news+=1;}
  if(!isNaN(sbp)){usedNews=true;if(sbp<=90)news+=3;else if(sbp<=100)news+=2;}
  if(avpu!=='A'){usedNews=true;news+=3;}
  if(usedNews){html+=card('ğŸ©º NEWS',`${news} ç‚¹`);}else{html+=card('ğŸ©º NEWS','è©•ä¾¡ã§ãã¾ã›ã‚“ï¼ˆNEWSé–¢é€£é …ç›®ãªã—ï¼‰');}

  // qSOFA
  let q=0; let usedQ=false;
  if(!isNaN(rr)){usedQ=true;if(rr>=22)q++;}
  if(!isNaN(gE)&&!isNaN(gV)&&!isNaN(gM)){usedQ=true;const gcs=gE+gV+gM;if(gcs<15)q++;}
  if(!isNaN(sbp)){usedQ=true;if(sbp<=100)q++;}
  if(usedQ){html+=card('ğŸ”´ qSOFA',`${q} ç‚¹`);}else{html+=card('ğŸ”´ qSOFA','è©•ä¾¡ã§ãã¾ã›ã‚“ï¼ˆqSOFAé–¢é€£é …ç›®ãªã—ï¼‰');}

  // DSI
  if(!isNaN(pulse)&&!isNaN(dbp)&&dbp!==0){
    const dsi=(pulse/dbp).toFixed(2);
    const dm=dsi>=3?'å±æ©Ÿçš„':dsi>=2?'ã‚·ãƒ§ãƒƒã‚¯ç–‘ã„':dsi>=1?'è»½åº¦':'æ­£å¸¸';
    html+=card('ğŸ§® DSI',`DSI=${dsi} â†’ ${dm}`);
  }else{
    const miss=[];if(isNaN(pulse))miss.push('è„ˆæ‹');if(isNaN(dbp))miss.push('æ‹¡å¼µæœŸè¡€åœ§');
    html+=card('ğŸ§® DSI',`è©•ä¾¡ã§ãã¾ã›ã‚“ï¼ˆ${miss.join('ãƒ»')}ï¼‰`);
  }

  // MAP
  if(!isNaN(sbp)&&!isNaN(dbp)){
    const map=((sbp+2*dbp)/3).toFixed(1);
    html+=card('ğŸ©¸ MAP',`MAP=${map} mmHg`);
  }else{
    const miss=[];if(isNaN(sbp))miss.push('åç¸®æœŸè¡€åœ§');if(isNaN(dbp))miss.push('æ‹¡å¼µæœŸè¡€åœ§');
    html+=card('ğŸ©¸ MAP',`è©•ä¾¡ã§ãã¾ã›ã‚“ï¼ˆ${miss.join('ãƒ»')}ï¼‰`);
  }

  // Urine
  if(!isNaN(urine)){
    html+=card('ğŸš» å°¿é‡',`${urine} ml/h â†’ ${urine<50?'å°‘å°¿':'æ­£å¸¸'}`);
  }

  resultArea.innerHTML=html;
});
</script>

</section>
</body>
</html>
